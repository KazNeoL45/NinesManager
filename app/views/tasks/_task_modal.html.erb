<div id="taskModal"
     class="fixed inset-0 hidden z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4"
     data-controller="modal"
     data-modal-target="overlay"
     data-action="keydown@window->modal#closeWithKeyboard click->modal#closeBackground">

  <div class="w-full max-w-2xl rounded-3xl bg-white p-8 shadow-xl">

    <div class="flex items-center justify-between mb-8">
      <h2 class="text-2xl text-gray-900">
        <%= task.title %>
      </h2>
      <button data-action="click->modal#close" class="text-gray-400 hover:text-gray-600 transition">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <div class="space-y-6">

      <div class="space-y-2">
        <p class="text-sm text-gray-500">Description</p>
        <p class="text-gray-900 whitespace-pre-wrap">
          <%= task.description.presence || "No description provided." %>
        </p>
      </div>

      <div class="flex flex-wrap gap-10">

        <div class="space-y-2">
          <p class="text-sm text-gray-500">Priority</p>
          <span class="inline-flex px-3 py-1 rounded-full text-sm
            <%= task.priority == 'urgent' ? 'bg-red-100 text-red-700' :
                task.priority == 'high' ? 'bg-orange-100 text-orange-700' :
                task.priority == 'medium' ? 'bg-yellow-100 text-yellow-700' :
                'bg-green-100 text-green-700' %>">
            <%= task.priority.capitalize %>
          </span>
        </div>

        <% if task.due_date.present? %>
          <div class="space-y-2">
            <p class="text-sm text-gray-500">Due date</p>
            <p class="text-gray-900">
              <%= task.due_date.strftime("%B %d, %Y") %>
            </p>
          </div>
        <% end %>

        <div class="space-y-2">
          <p class="text-sm text-gray-500">Column</p>
          <p class="text-gray-900">
            <%= task.column&.name || "â€”" %>
          </p>
        </div>

        <div class="space-y-2">
          <p class="text-sm text-gray-500">Assigned to</p>
          <p class="text-gray-900">
            <%= task.user&.email || "Unassigned" %>
          </p>
        </div>

      </div>
    </div>

    <div class="flex justify-end gap-3 pt-8 mt-8 border-t border-gray-100">

      <%= link_to "Edit",
        edit_project_task_path(project, task),
        data: { turbo_frame: "modals" },
        class: "px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition" %>

      <%= link_to "Delete",
        project_task_path(project, task),
        data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this task?" },
        class: "px-4 py-2 rounded-xl bg-red-100 text-red-700 hover:bg-red-200 transition" %>

    </div>

  </div>
</div>
